{% extends 'base.html' %}
{% block breadcrumb %}
    <li class="breadcrumb-item">
        <a class="nav-link" href="{% url 'lecture:index' %}">Home</a>

    </li>

{% endblock %}
{% block content %}
{% if lectures %}
    <div class="col-12">
    <div class="row ">
    {% for lecture in lectures %}
        {% autoescape off %}
        <div class="col-lg-4 col-md-12 mb-3">
            <div class="card">
            <div class="card-body">
              <h5 class="card-title">
                <a href="{% url 'lecture:detail' lecture.id %}">
                  <u>{{ lecture.title }}</u>
                </a>
              </h5>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">简介： {{ lecture.introduction }}</li>
                    <li class="list-group-item">时间: {{ lecture.lecture_time }}</li>
                    <li class="list-group-item">地点: {{ lecture.lecture_location }}</li>

                    <li class="list-group-item">演讲人: {{ lecture.lecturer }}
                        <br/>
                        {{ lecture.lecturer_introduction }}
                    </li>
                    <li class="list-group-item">选课人数: {{ lecture.get_number_of_selected }}/{{ lecture.capacity }}</li>
                    <li class="list-group-item">
                        {% if request.user.is_staff %}
                            <div class="btn-group">
                                <a href="#" class="btn btn-primary m-auto">修改</a>
                                <a href="#" class="btn btn-danger m-auto">删除</a>
                                <a href="{% url 'lecture:draw' lecture.id %}" class="btn btn-info m-auto {% if lecture.did_draw %} disabled{% endif %}">抽选</a>
                            </div>
                        {% else %}
                            <a href="{% url 'lecture:signup' lecture.id %}" class="btn btn-primary m-auto">报名</a>
                        {% endif %}
                    </li>
                </ul>
            </div>
            </div>
            <div class="clearfix"></div>
        </div>


        {% endautoescape %}
    {% endfor %}
    </div>


    {% if request.user.is_staff %}
        <a href="create" class="btn btn-primary">Create A Lecture</a>
    {% endif %}
    </div>
{% else %}
    <p class="text-center">
        当前没有讲座
    </p>
    <a class="btn btn-primary text-center" href="{% url 'lecture:create' %}">
        添加讲座
    </a>
{% endif %}
{% endblock %}